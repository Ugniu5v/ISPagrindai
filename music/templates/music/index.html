{% extends "_base.html" %}
{% block title %}Dainos › Muzikos sistema{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-start mb-4">
  <h2 class="fw-semibold mb-0">Dainos</h2>
  {% if "user" in request.session %}
    <a href="{% url 'music:createSong' %}" class="btn btn-primary">Pridėti dainą</a>
  {% endif %}
</div>

{% if songs %}
  <div class="row g-4">
    {% for song in songs %}
      <div class="col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 bg-body-tertiary border-0 shadow-sm">
          {% if song.virselis_url %}
          <img src="{{ song.virselis_url }}" class="card-img-top" alt="Viršelis {{ song.pavadinimas }}" style="object-fit: cover; height: 180px;">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title mb-1">{{ song.pavadinimas }}</h5>
          </div>
          <div class="card-footer bg-transparent border-top border-secondary">
            <div class="d-flex flex-wrap gap-2">
              {% if song.failas_url %}
              <a href="{% url 'music:playSong' song.pk %}" class="btn btn-sm btn-primary">Klausyti</a>
              {% else %}
              <button type="button" class="btn btn-sm btn-secondary disabled" aria-disabled="true">Nėra failo</button>
              {% endif %}
              <a href="{% url 'music:editSong' %}?song={{ song.pk }}" class="btn btn-sm btn-primary">Redaguoti</a>
              <a href="{% url 'music:similarSongs' %}?song={{ song.pk }}" class="btn btn-sm btn-primary">Panašios</a>
              <a href="{% url 'music:rateSong' %}?song={{ song.pk }}" class="btn btn-sm btn-primary">Įvertinti</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info">
    Nėra dainų.
    {% if "user" in request.session %}
        <a href="{% url 'music:createSong' %}">Pridėkite pirmąją dainą.</a>
    {% endif %}
  </div>
{% endif %}
{% endblock %}
