<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Concert - {{ koncertas.pavadinimas }}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="bg-black text-white p-4">
    <div class="container mt-4">
      <h1 class="mb-4">Edit Concert</h1>

      <nav class="mb-4">
        <a href="{% url 'concerts:concertDetail' pk=koncertas.pk %}" class="btn btn-outline-light me-2"
          >‚Üê View Details</a
        >
        <a href="{% url 'homepage' %}" class="btn btn-outline-light">Back to Home</a>
      </nav>

      <div class="alert alert-info">
        <strong>Editing:</strong> {{ koncertas.pavadinimas }}<br />
        <strong>Created:</strong> {% if koncertas.sukurimo_data %}{{ koncertas.sukurimo_data|date:"M d, Y" }}{% else %}Not specified{% endif %}<br />
        <strong>Last Updated:</strong> {% if koncertas.atnaujinimo_data %}{{ koncertas.atnaujinimo_data|date:"M d, Y" }}{% else %}Not specified{% endif %}
      </div>

      <div class="card bg-dark text-white">
        <div class="card-body">
          <form method="post">
            {% csrf_token %}
            <div class="mb-3">
              <label for="pavadinimas" class="form-label">Concert Name *</label>
              <input
                type="text"
                class="form-control bg-dark text-white"
                id="pavadinimas"
                name="pavadinimas"
                value="{{ koncertas.pavadinimas }}"
                required
              />
            </div>

            <div class="mb-3">
              <label for="pradzios_data" class="form-label">Start Date *</label>
              <input
                type="date"
                class="form-control bg-dark text-white"
                id="pradzios_data"
                name="pradzios_data"
                value="{% if koncertas.pradzios_data %}{{ koncertas.pradzios_data|date:'Y-m-d' }}{% endif %}"
                required
              />
            </div>

            <div class="mb-3">
              <label for="pabaigos_data" class="form-label">Finish Date *</label>
              <input
                type="date"
                class="form-control bg-dark text-white"
                id="pabaigos_data"
                name="pabaigos_data"
                value="{% if koncertas.pabaigos_data %}{{ koncertas.pabaigos_data|date:'Y-m-d' }}{% endif %}"
                required
              />
            </div>

            <div class="mb-3">
              <label for="bilietu_url" class="form-label">Ticket URL</label>
              <input
                type="url"
                class="form-control bg-dark text-white"
                id="bilietu_url"
                name="bilietu_url"
                value="{{ koncertas.bilietu_url }}"
              />
            </div>

            <div class="mb-3">
              <label for="aprasymas" class="form-label">Description</label>
              <textarea
                class="form-control bg-dark text-white"
                id="aprasymas"
                name="aprasymas"
                rows="4"
              >{{ koncertas.aprasymas }}</textarea>
            </div>

            <div class="mb-3">
              <label for="zmoniu_talpa" class="form-label">Maximum Tickets *</label>
              <input
                type="number"
                class="form-control bg-dark text-white"
                id="zmoniu_talpa"
                name="zmoniu_talpa"
                value="{{ koncertas.zmoniu_talpa }}"
                min="1"
                required
              />
            </div>

            <div class="mb-3">
              <label for="zanras" class="form-label">Genre *</label>
              <select class="form-select bg-dark text-white" id="zanras" name="zanras" required>
                {% for value, label in zanrai %}
                  <option value="{{ value }}" {% if koncertas.zanras == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="mb-3">
              <label for="vieta" class="form-label">Location</label>
              <select class="form-select bg-dark text-white" id="vieta" name="vieta">
                <option value="">Select Location</option>
                {% for vieta in vietos %}
                  <option value="{{ vieta.id }}" {% if koncertas.vieta.id == vieta.id %}selected{% endif %}>{{ vieta.pavadinimas }} - {{ vieta.miestas }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="yra_atsauktas"
                name="yra_atsauktas"
                {% if koncertas.yra_atsauktas %}checked{% endif %}
              />
              <label class="form-check-label" for="yra_atsauktas">Is Cancelled</label>
            </div>

            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="yra_viesas"
                name="yra_viesas"
                {% if koncertas.yra_viesas %}checked{% endif %}
              />
              <label class="form-check-label" for="yra_viesas">Is Public</label>
            </div>

            <button type="submit" class="btn btn-primary me-2">Update Concert</button>
            <a href="{% url 'concerts:concertDetail' pk=koncertas.pk %}" class="btn btn-secondary me-2"
              >View Details</a
            >
            <a href="{% url 'concerts:index' %}" class="btn btn-outline-light">Cancel</a>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
