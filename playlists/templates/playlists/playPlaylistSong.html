{% extends "_base.html" %}
{% block title %}Grojaraščio grojimas{% endblock %}

{% block content %}

<div class="d-flex gap-4">

    <!-- LEFT SIDE: Song list -->
    <div style="width: 250px; max-height: 80vh; overflow-y: auto;" class="bg-dark p-3 rounded">
        <h5 class="mb-3">Grojaraščio dainos</h5>

        <ul class="list-group">
            {% for d in songs %}
            <a 
                href="{% url 'playlists:playPlaylistSong' playlist.id d.id %}" 
                class="list-group-item list-group-item-action 
                       {% if d.id == current.id %}active text-white{% else %}bg-black text-white{% endif %}">
                {{ d.eilės_nr }}. {{ d.dainos_pavadinimas }}
                <br>
                <small class="text-secondary">{{ d.atlikėjo_vardas }}</small>
            </a>
            {% endfor %}
        </ul>

        <a href="{% url 'playlists:PlaylistDetail' playlist.id %}" class="btn btn-secondary mt-3 w-100">
            Atgal į grojaraštį
        </a>
    </div>


    <!-- RIGHT SIDE: Player -->
    <div class="flex-grow-1">
        <h3>{{ current.dainos_pavadinimas }}</h3>
        <p class="text-secondary">Atlikėjas: {{ current.atlikėjo_vardas }}</p>

        {% if song and audio_url %}
        <audio id="audio-player" controls autoplay class="w-100 mb-3">
            <source src="{{ audio_url }}" {% if audio_mime %}type="{{ audio_mime }}"{% endif %}>
        </audio>
        {% else %}
        <div class="alert alert-warning">Šiai dainai nėra audio failo.</div>
        {% endif %}

        <!-- Navigation Buttons -->
        <div class="d-flex gap-2">
            {% if prev_id %}
            <a class="btn btn-outline-light"
               href="{% url 'playlists:playPlaylistSong' playlist.id prev_id %}">
                « Ankstesnė
            </a>
            {% endif %}

            {% if next_id %}
            <a class="btn btn-outline-light"
               href="{% url 'playlists:playPlaylistSong' playlist.id next_id %}">
                Kitas »
            </a>
            {% endif %}
        </div>

    </div>

</div>

{% endblock %}
